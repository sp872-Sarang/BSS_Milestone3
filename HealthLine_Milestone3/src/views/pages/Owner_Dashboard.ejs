<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Your Business Profile</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
    <!-- Bulma Version 0.9.0-->
    <link rel="stylesheet" href="https://unpkg.com/bulma@0.9.0/css/bulma.min.css" />
    <!-- <link rel="stylesheet" type="text/css" href="../css/admin.css"> -->
</head>

<body>

    <!-- START NAV -->
    <nav class="navbar is-white">
        <div class="container">
            <div class="navbar-brand">
                <a class="navbar-item brand-text" href="../index.html">
        </a>
                <div class="navbar-burger burger" data-target="navMenu">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            <div id="navMenu" class="navbar-menu">
                <div class="navbar-start">
                    <a class="navbar-item" href="admin.html">
          </a>
                    <a class="navbar-item" href="admin.html">
          </a>
                    <a class="navbar-item" href="admin.html">
          </a>
                    <a class="navbar-item" href="admin.html">
          </a>
                                 <a class="navbar-item" href="admin.html">
          </a>
                </div>

            </div>
        </div>
    </nav>
    <!-- END NAV -->
    <div class="container">
        <div class="columns">
            <div class="column is-3 ">
                <aside class="menu is-hidden-mobile">
                    <p class="menu-label">
                        Your Profile
                    </p>
                    <ul class="menu-list">
                        <div class="has-background-primary has-text-white">
                        <li><a class="is-active">Dashboard</a></li>
                        </div>
                    </ul>
                </aside>
            </div>
            <div class="column is-9">
                <nav class="breadcrumb" aria-label="breadcrumbs">
                    <ul>
                        <li class="is-active"><a href="#" aria-current="page">Admin</a></li>
                    </ul>
                </nav>
                <section class="hero is-info welcome is-small">
                    <div class="has-background-primary has-text-white">
                        <div class="container">
                            <h1 class="title">
                                Welcome!
                            </h1>
                            <h2 class="subtitle">
                                Here is your business profile.
                            </h2>
                        </div>
                    </div>
                </section>
                <section class="info-tiles">
                    <div class="tile is-ancestor has-text-centered">
                        <div class="tile is-parent">
                            <article class="tile is-child box">
                                <p id = "myData4" class="title">
                                    <!-- <div id="myData3"></div> -->
                                </p>
                                <p class="subtitle">Revenue</p>
                            </article>
                        </div>
                        <div class="tile is-parent">
                            <article class="tile is-child box">
                                <p id = "myData3" class="title">
                                    <!-- <div id="myData3"></div> -->
                                </p>
                                <p class="subtitle">Bookings</p>
                            </article>
                        </div>
                    </div>
                </section>
                <div class="columns">
                    <div class="column is-6">
                        <div class="card events-card">
                            <header class="card-header">
                                <p class="card-header-title">
                                    Appointments
                                </p>
                                <a href="#" class="card-header-icon" aria-label="more options">
                  <span class="icon">
                    <i class="fa fa-angle-down" aria-hidden="true"></i>
                  </span>
                </a>
                            </header>
                            <div class="card-table">
                                <div class="content">
                                    <table class="table is-fullwidth is-striped">
                                        <tbody>
                                            <div id="myData2"></div>
                                                <!-- <button type="button" class="button is-link is-fullwidth has-text-weight-medium is-medium is-success" onclick="storeData()">Send Question</button> -->
                                                <button type="submit" id="bookings" class="button is-link is-fullwidth has-text-weight-medium is-medium is-success">Bookings</button>
                                            </div>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="column is-6">
                        <div class="card">
                            <header class="card-header">
                                <p class="card-header-title">
                                    FAQ's </p>
                                <a href="#" class="card-header-icon" aria-label="more options">
                  <span class="icon">
                    <i class="fa fa-angle-down" aria-hidden="true"></i>
                  </span>
                </a>
                            <!-- </header>
                            <div class="field">
                                <div class="control is-medium">
                                    <input class="input is-medium" type="text" placeholder="Do you offer any diet plans?">
                                </div>
                        </div>
                        <div class="field">
                            <div class="control is-medium">
                                <input class="input is-medium" type="text" placeholder="Do you treat sclerosis?">
                            </div>
                    </div>
                    <div class="field">
                        <div class="control is-medium">
                            <input class="input is-medium" type="text" placeholder="Do you have any discounts for first time customers?">
                        </div>
                </div> -->
                            </header>
                                <div class=“card-table”>
                                    <div class=“content”>
                                        <table class=“table is-fullwidth is-striped”>
                                            <tbody>
                                                <div >
                                                    <td width=“5%“><i class=“fa fa-bars”></i></td>
                                                    <!-- <div class="control" id = "myData" > -->
                                                    <div id="myData"></div>
                                                        <!-- <button type="button" class="button is-link is-fullwidth has-text-weight-medium is-medium is-success" onclick="storeData()">Send Question</button> -->
                                                        <button type="submit" id="faqbutton" class="button is-link is-fullwidth has-text-weight-medium is-medium is-success">FAQ</button>
                                                    </div>
                                                    <!-- <td class=“level-right”><a class=“button is-small is-primary” href=“#”>Action</a></td> -->
                                                </div>


                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- <script async type="text/javascript" src="../js/bulma.js"></script> -->
</body>
<!-- <body>
    <div id="myData"></div>
    <script>
        fetch('people.json')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                appendData(data);
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });
        function appendData(data) {
            var mainContainer = document.getElementById("myData");
            for (var i = 0; i < data.length; i++) {
                var div = document.createElement("div");
                div.innerHTML = 'Name: ' + data[i].firstName + ' ' + data[i].lastName;
                mainContainer.appendChild(div);
            }
        }
    </script>
</body> -->

<!-- import { collection, getDocs } from "firebase/firestore"; -->
<script>

window.onload = () => {
    fetch('/get_data', {
    method: 'POST',
    headers: {
    'Content-Type':'application/json'
    },
    body: JSON.stringify({
        collectionName : 'bookings',//'TEST',
        // documentId : "test23", //'justanotheremail@email.com',
        }
    ) // add the users ID token here
    }).then(res => res.json())
    .then((res) =>{

        console.log('tring to get data');
        console.log(res);
        console.log(res);
        console.log(res);
    var mainContainer3 = document.getElementById("myData3");
    var mainContainer4 = document.getElementById("myData4");
    mainContainer3.innerHTML = res.req_data.length;
    var temp = parseInt(res.req_data.length) * 50;
    mainContainer4.innerHTML = "$" + temp;
    console.log(res.req_data.length);
    });





};



// const documentReferences = admin.firestore()
//         .collection('faq')
//         .listDocuments()
//
// const documentIds = documentReferences.map(it => it.id)
// async function demoInitialize(db) {
// // [START demo_initialize]
// // Fetch data from Firestore
//     console.log("testing here");
//     const snapshot = await db.collection('faq').get();
//
//     // Print the ID and contents of each document
//     snapshot.forEach(doc => {
//     console.log(doc.id, ' => ', doc.data());
//     });
//     // [END demo_initialize]
// }
document.getElementById("faqbutton").addEventListener("click", createfn, false);

function createfn()
{
            // const snapshot = await db.collection('faq').get();
            // console.log("testing here");
            //
            // // Print the ID and contents of each document
            // snapshot.forEach(doc => {
            // console.log(doc.id, ' => ', doc.data());
            // });

            fetch('/get_data', {
            method: 'POST',
            headers: {
            'Content-Type':'application/json'
            },
            body: JSON.stringify({
                collectionName : 'faq',//'TEST',
                // documentId : "test23", //'justanotheremail@email.com',
                }
            ) // add the users ID token here
            }).then(res => res.json())
            .then((res) =>{

                console.log('tring to get data');
                console.log(res);
                console.log(res.collection_name);
                console.log(res.document_id);
                console.log(res);
                console.log(res.req_data.email);
                console.log(res);
            var mainContainer = document.getElementById("myData");
            for (var i = 0; i < res.req_data.length; i++) {
                var div = document.createElement("div");
                mainContainer.innerHTML += '<br>' + res.req_data[i].query
                console.log("query:" + res.req_data[i].query);
                //tr.innerHTML = "query:"; //+ res[i].inputQuery;
                mainContainer.appendChild(div);
            }
            });
}

document.getElementById("bookings").addEventListener("click", createfn2, false);

function createfn2()
{
            // const snapshot = await db.collection('faq').get();
            // console.log("testing here");
            //
            // // Print the ID and contents of each document
            // snapshot.forEach(doc => {
            // console.log(doc.id, ' => ', doc.data());
            // });

            fetch('/get_data', {
            method: 'POST',
            headers: {
            'Content-Type':'application/json'
            },
            body: JSON.stringify({
                collectionName : 'bookings',//'TEST',
                // documentId : "test23", //'justanotheremail@email.com',
                }
            ) // add the users ID token here
            }).then(res => res.json())
            .then((res) =>{

                console.log('tring to get data');
                console.log(res);
                console.log(res.collection_name);
                console.log(res.document_id);
                console.log(res);
                console.log(res.req_data.email);
                console.log(res);
            var mainContainer2 = document.getElementById("myData2");
            for (var i = 0; i < res.req_data.length; i++) {
                var div = document.createElement("div");
                mainContainer2.innerHTML += '<br>' + res.req_data[i].name + " "  + res.req_data[i].email + " " + res.req_data[i].time + " " + res.req_data[i].service;
                console.log(res.req_data[i].name + " " + res.req_data[i].email + " " + res.req_data[i].time + " " + res.req_data[i].service);
                //tr.innerHTML = "query:"; //+ res[i].inputQuery;
                mainContainer2.appendChild(div);
            }
            });
}



        // fetch('/get_data', {
        // method: 'POST',
        // headers: {
        // 'Content-Type':'application/json'
        // },
        // body: JSON.stringify({
        //     collectionName : 'faq',//'TEST',
        //     documentId : 'test23', //'justanotheremail@email.com',
        //     }
        // ) // add the users ID token here
        // }).then(res => res.json())
        // .then(function (res.req_data) {
        //     appendData(res.req_data);
        // })
        // // .catch(function (err) {
        // //     console.log('error: ' + err);
        // // });
        // function appendData(data) {
        //     var mainContainer = document.getElementById("myData");
        //     for (var i = 0; i < data.length; i++) {
        //         var div = document.createElement("div");
        //         div.innerHTML = 'Name: ' + data[i].firstName + ' ' + data[i].lastName;
        //         mainContainer.appendChild(div);
        //     }
        // }
        //     //tr.innerHTML = "query:"; //+ res[i].inputQuery;
        //     // mainContainer.appendChild(div);


// window.onload = () => {
//
//     // document
//     //   .getElementById("FAQ-form")
//     //   .addEventListener("submit", (event) => {
//     //     event.preventDefault();
//     //     const email = event.target.inputEmail.value;
//     //     const question = event.target.inputQuery.value;
//     //     const name = event.target.inputName.value;
//     window.addEventListener('load', (event)) => {
//
//
//         fetch('/get_data', {
//                 method: 'POST',
//                 headers: {
//                 'Content-Type':'application/json'
//                 },
//                 body: JSON.stringify({
//                     collectionName : 'faq',//'TEST',
//                     documentId : 'test23', //'justanotheremail@email.com',
//                     }
//                 ) // add the users ID token here
//                 }).then(res => res.json())
//                 .then((res) =>{
//
//                     console.log('tring to get data');
//                     console.log(res.collection_name);
//                     console.log(res.document_id);
//                     console.log(res.req_data.email);
//                 var mainContainer = document.getElementById("myData");
//                 for (var i = 0; i < res.length; i++) {
//                     var div = document.createElement("div");
//                     console.log("query:" + res[i].inputQuery);
//                     div.innerHTML = "query:" + res[i].inputQuery.value;
//                     mainContainer.appendChild(div);
//                 }
//                 });
//
//             });
//
//
//       // });
// };
</script>

</html>
